{
  "conceptual": "\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"3\">Permutation variables are global variables set either through C++ code or exposed through materials. The value of a permutation variable at the time of a drawcall affects which permutation of a shader is used for rendering.</p>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"5\">Permutation variables allow to create different variants of the same shader, without creating different shader files. Since their state is global, they decouple the decision which shader to use from the code that actually has this information at hand.</p>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"7\">For instance, materials support different rendering modes. By default they use proper lighting, but for debugging purposes we might want to override this and always output unlit diffuse color (or normals, UV coordinates, etc). The information which shader to use to render a certain object is stored either in a material or directly set through code. Without permutation variables we would either need to use an entirely different shader to get our debug output, which would mean that everything would need to support this functionality, or the shader would need to decide the final output mode dynamically, adding a large performance hit for a feature that is not used in the final game.</p>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"9\">Permutation variables solve this problem by creating different variants of the shader, and letting the engine pick the correct one depending on the current values.</p>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"11\">In shader code, permutation variables are exposed as <code sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"11\">#define</code>'d preprocessor variables and therefore can be evaluated like any other preprocessor directive.</p>\n<h2 id=\"the-shader-permutations-section\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"13\">The Shader Permutations Section</h2>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"15\">Each shader is made up of several <strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"15\">sections</strong>.</p>\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"17\">[PLATFORMS]\n\nALL\nDEBUG\n\n[PERMUTATIONS]\n\nALPHATEST\nWIREFRAME\n\n[MATERIALPARAMETER]\n\nPermutation ALPHATEST;\n\n[RENDERSTATE]\n\n#if WIREFRAME == 1\n    WireFrame = true\n#endif\n\n[VERTEXSHADER]\n\nVS_OUT main(VS_IN Input)\n{\n  ...\n}\n\n[PIXELSHADER]\n\n...\n</code></pre>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"50\">In the <strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"50\">[PERMUTATIONS]</strong> section the shader author has to list all permutation variables that are going to be evaluated inside the shader code. If a variable is used without being mentioned in this section, your shader might compile and work, but the result will always be the same.</p>\n<h2 id=\"ezpermvar-files\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"52\">ezPermVar Files</h2>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"54\">Every permutation variable must be defined in a file that has the exact name of the permutation variable and the <code sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"54\">.ezPermVar</code> extension.</p>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"56\">All ezPermVar files must reside in a specific subfolder in any data directory. By default the subfolder is <strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"56\">&quot;Shaders/PermutationVars&quot;</strong>.</p>\n<h2 id=\"bool-permutation-variables\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"58\">bool Permutation variables</h2>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"60\">The definition of a boolean permutation variable in its ezPermVar file simply looks like this:</p>\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"62\">bool TWO_SIDED;\n</code></pre>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"66\">A boolean permutation variable is permuted over the values <strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"66\">TRUE</strong> and <strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"66\">FALSE</strong>. In a shader it would be evaluate like this:</p>\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"68\">#if defined(PIXEL_SHADER) &amp;&amp; TWO_SIDED == TRUE\n    uint FrontFace : SV_IsFrontFace;\n#endif\n</code></pre>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"74\">In C++ code the variable is set like this:</p>\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"76\">ezRenderContext::SetShaderPermutationVariable(&quot;TWO_SIDED&quot;, &quot;TRUE&quot;);\n</code></pre>\n<h2 id=\"enum-permutation-variables\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"80\">enum Permutation Variables</h2>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"82\">Enum permutation variables allow you to use more than two permutation values and they can have more descriptive names.</p>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"84\">The definition of an enum variable in its ezPermVar file looks like this:</p>\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"86\">enum BLEND_MODE\n{\n    OPAQUE,\n    MASKED,\n    TRANSPARENT,\n    ADDITIVE,\n    MODULATE\n};\n</code></pre>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"97\"><strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"97\">Note:</strong> When evaluating an enum variable in a shader, the value must be prefixed with the name of the variable and an underscore:</p>\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"99\">#if BLEND_MODE == BLEND_MODE_MASKED\n    return opacity - MaskThreshold;\n#else\n    return opacity;\n#endif\n</code></pre>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"107\">As you can see, the name used for comparison is <strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"107\">BLEND_MODE_MASKED</strong> although in the definition it was named <strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"107\">MASKED</strong>. In C++ code we use the actual name though:</p>\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"109\">ezRenderContext::SetShaderPermutationVariable(&quot;BLEND_MODE&quot;, &quot;MASKED&quot;);\n</code></pre>\n<h2 id=\"exposing-permutations-to-materials\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"113\">Exposing Permutations to materials</h2>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"115\">By default permutation variables do not show up in materials and therefore cannot be manually specified by artists. If you want a variable to show up, simply list it in the <strong sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"115\">[MATERIALPARAMETER]</strong> section:</p>\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"117\">[MATERIALPARAMETER]\n\nPermutation ALPHATEST;\n\n</code></pre>\n<p sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"124\">The type (<code sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"124\">bool</code> or <code sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"124\">enum</code>) and the available values are automatically read from the ezPermVar file that defines the variable and will show up in the material properties accordingly.</p>\n<h2 id=\"see-also\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"126\">See Also</h2>\n<ul sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"128\">\n<li sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"128\"><a href=\"~/pages/docs/graphics/shaders/shaders-overview.md\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"128\">Shaders (TODO)</a></li>\n<li sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"129\"><a href=\"~/pages/docs/graphics/shaders/shader-templates.md\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"129\">Shader Templates</a></li>\n<li sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"130\"><a href=\"~/pages/docs/graphics/shaders/shader-debugging.md\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"130\">Shader Debugging</a></li>\n<li sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"131\"><a href=\"~/pages/docs/graphics/shaders/shader-render-state.md\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"131\">The Shader Render State Section</a></li>\n</ul>\n",
  "type": "Conceptual",
  "source": {
    "remote": {
      "path": "pages/docs/graphics/shaders/shader-permutation-variables.md",
      "branch": "main",
      "repo": "https://github.com/ezEngine/docs-src"
    },
    "startLine": 0.0,
    "endLine": 0.0
  },
  "path": "pages/docs/graphics/shaders/shader-permutation-variables.md",
  "documentation": {
    "remote": {
      "path": "pages/docs/graphics/shaders/shader-permutation-variables.md",
      "branch": "main",
      "repo": "https://github.com/ezEngine/docs-src"
    },
    "startLine": 0.0,
    "endLine": 0.0
  },
  "_appFaviconPath": "assets/images/favicon.svg",
  "_appFooter": "Hello",
  "_appLogoPath": "assets/images/EZ-text.svg",
  "_appName": "ezEngine",
  "_appTitle": "ezEngine",
  "_enableGoogleAnalytics": true,
  "_enableNewTab": true,
  "_enableSearch": true,
  "_gitContribute": {
    "repo": "https://github.com/ezEngine/docs-src",
    "branch": "main"
  },
  "_systemKeys": [
    "conceptual",
    "type",
    "source",
    "path",
    "documentation",
    "title",
    "rawTitle",
    "wordCount"
  ],
  "rawTitle": "<h1 id=\"shader-permutation-variables\" sourcefile=\"pages/docs/graphics/shaders/shader-permutation-variables.md\" sourcestartlinenumber=\"1\">Shader Permutation Variables</h1>",
  "title": "Shader Permutation Variables",
  "wordCount": 616.0,
  "_key": "pages/docs/graphics/shaders/shader-permutation-variables.md",
  "_navKey": "~/toc.yml",
  "_navPath": "toc.html",
  "_navRel": "../../../../toc.html",
  "_path": "pages/docs/graphics/shaders/shader-permutation-variables.html",
  "_rel": "../../../../",
  "_tocKey": "~/pages/docs/toc.md",
  "_tocPath": "pages/docs/toc.html",
  "_tocRel": "../../toc.html",
  "__global": {
    "namespacesInSubtitle": "Namespaces",
    "classesInSubtitle": "Classes",
    "structsInSubtitle": "Structs",
    "interfacesInSubtitle": "Interfaces",
    "enumsInSubtitle": "Enums",
    "delegatesInSubtitle": "Delegates",
    "constructorsInSubtitle": "Constructors",
    "fieldsInSubtitle": "Fields",
    "propertiesInSubtitle": "Properties",
    "methodsInSubtitle": "Methods",
    "eventsInSubtitle": "Events",
    "operatorsInSubtitle": "Operators",
    "eiisInSubtitle": "Explicit Interface Implementations",
    "functionsInSubtitle": "Functions",
    "variablesInSubtitle": "Variables",
    "typeAliasesInSubtitle": "Type Aliases",
    "membersInSubtitle": "Members",
    "improveThisDoc": "Edit this page",
    "viewSource": "View Source",
    "inheritance": "Inheritance",
    "derived": "Derived",
    "inheritedMembers": "Inherited Members",
    "package": "Package",
    "namespace": "Namespace",
    "assembly": "Assembly",
    "syntax": "Syntax",
    "overrides": "Overrides",
    "implements": "Implements",
    "remarks": "Remarks",
    "examples": "Examples",
    "seealso": "See Also",
    "declaration": "Declaration",
    "parameters": "Parameters",
    "typeParameters": "Type Parameters",
    "type": "Type",
    "name": "Name",
    "description": "Description",
    "returns": "Returns",
    "fieldValue": "Field Value",
    "propertyValue": "Property Value",
    "eventType": "Event Type",
    "variableValue": "Variable Value",
    "typeAliasType": "Type Alias Type",
    "exceptions": "Exceptions",
    "condition": "Condition",
    "extensionMethods": "Extension Methods",
    "note": "Note",
    "warning": "Warning",
    "tip": "Tip",
    "important": "Important",
    "caution": "Caution",
    "tocToggleButton": "Show / Hide Table of Contents",
    "tocFilter": "Filter by title",
    "search": "Search",
    "searchResults": "Search Results for",
    "searchResultsCount": "{count} results for \"{query}\"",
    "searchNoResults": "No results for \"{query}\"",
    "pageFirst": "First",
    "pagePrev": "Previous",
    "pageNext": "Next",
    "pageLast": "Last",
    "inThisArticle": "In this article",
    "nextArticle": "Next",
    "prevArticle": "Previous",
    "backToTop": "Back to top",
    "themeLight": "Light",
    "themeDark": "Dark",
    "themeAuto": "Auto",
    "changeTheme": "Change theme",
    "copy": "Copy",
    "downloadPdf": "Download PDF",
    "_shared": {}
  },
  "_disableToc": false,
  "docurl": "https://github.com/ezEngine/docs-src/blob/main/pages/docs/graphics/shaders/shader-permutation-variables.md/#L1"
}