<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Animation Graphs | ezEngine </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Animation Graphs | ezEngine ">
    <meta name="generator" content="docfx 2.57.2.0">
    
    <link rel="shortcut icon" href="../../../../../assets/images/favicon.svg">
    <link rel="stylesheet" href="../../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../../">
    <meta property="docfx:newtab" content="true">
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../../index.html" style="padding-right: 15px;">
                <!--<img id="logo" class="svg" src="../../../../../assets/images/EZ-text.svg" style="width: 100px; height: 50px;" alt="" >-->
                <img id="logo" src="../../../../../assets/images/EZ-text.svg" style="width: 100px; height: 50px;" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="animation-graphs">Animation Graphs</h1>

<p>Animating characters is a complex task. Even simple creatures typically already need tens of different <a href="../animation-clip-asset.html">animation clips</a> for locomotion and basic actions. However, having the animation clips is not enough, they also need to be played on the <a href="../animated-mesh-asset.html">animated mesh</a> in such a way that animations blend over nicely and play perfectly in sequence. Additionally you may need to apply an animation only to a certain part of the body. Animations should fade in and out smoothly as they are activated and deactivated, and certain clips need to be synchronized to achieve the desired effect.</p>
<p>An <em>animation graph</em> is used to configure how each animation clip of a character should behave when it is actively played on the mesh. Animation graphs are the basis for complex animation playback. They also provide some very basic functionality for logic and math, such that one can build simple state machines. For more complex decisions which animations should play when, use <a href="../../../custom-code/custom-code-overview.html">custom code</a>.</p>
<h2 id="creating-and-using-animation-graphs">Creating and Using Animation Graphs</h2>
<p>Animation graphs are configured through the <a href="animation-graph-asset.html">animation graph asset type</a>. To apply the output pose of an animation graph to an <a href="../animated-mesh-component.html">animated mesh</a>, add an <a href="animation-controller-component.html">animation controller component</a> to the same <a href="../../../runtime/world/game-objects.html">game object</a>. The controller will send the output pose to the mesh every frame, but only while the scene is <a href="../../../editor/run-scene.html">simulated</a>.</p>
<p>To control what an animation graph will output, you typically also need a <a href="../../../Miscellaneous/blackboards.html">blackboard</a>. The blackboard is used to store state. Scripts or other <a href="../../../custom-code/custom-code-overview.html">custom code</a> decide which animations should be played and write that state to the blackboard. The animation graph in turn reads state from the blackboard and then activates the desired animation clip playback. The graph can also write back state to the blackboard, for example to communicate back that an animation clip has finished playing.</p>
<h2 id="animation-graph-concept">Animation Graph Concept</h2>
<!-- PAGE IS TODO -->
<!-- ALL THIS IS OUTDATED -->
<p>The following image shows a very basic animation graph:</p>
<p><img src="media/anim-graph-basic.png" alt="Basic Graph"></p>
<p>The flow of information is from left to right.</p>
<p>On the far left side the two green nodes are used to <a href="anim-nodes-blackboard.html">read state from the blackboard</a>. Here we read the blackboard values <em>PlayIdle</em> and <em>PlayWave</em> to see which animation clips should get played. The pink output pins are <em>trigger pins</em>, meaning they can be <em>active</em> (<em>triggered</em>) or <em>inactive</em>. When the read value is <code>1</code> (in this case) the pins are set to <em>triggered</em> which then activates the connected nodes to the right.</p>
<p>The two light blue nodes are used to sample animation clips. There are different ways how animation clips can be played, but here we only use very basic (looped) playback. When the <em>PlayIdle</em> blackboard value is set, the <em>Idle</em> clip will be sampled. When the <em>PlayWave</em> blackboard value is set, the <em>Wave</em> clip will get sampled. Any combination is possible, so both clips can be played at the same time.</p>
<p>The sampling nodes have a <em>LocalPose</em> output pin. This pin represents the animation pose that was determined. The pin also carries information about <em>weighting</em> the pose. That means when the clip playback was just started, the pose may still be fading and shouldn't immediately have full influence. Similarly, if a pose shall only be applied to a certain body part these <a href="anim-nodes-bone-weights.html">bone weights</a> are also included here and will be forwarded to any following node.</p>
<p>In the middle of the graph the combine poses node is used to gather multiple poses and turn them into one. This node uses the aforementioned bone weights and overall pose weight to blend all the available poses together.</p>
<p>Note that the blue nodes output <em>local poses</em>. That means the pose data is in a certain format. Data in this format can be used for certain operations, however, the data cannot be output in this format. Therefore the next step is to convert the pose from <em>local space</em> to <em>model space</em>. Once the data is in <em>model space</em> there are other operations that can be done with it.</p>
<p>In this graph, though, the converted pose is simply forwarded to the <a href="anim-nodes-output.html">output node</a>. This is always the final step.</p>
<h2 id="summary">Summary</h2>
<p>The animation graph uses a graph based workflow to let you visually configure how animation clips are combined. Nodes have inputs to control their behavior, and they output data or state that can (or must) be forwarded to the next step in the pipeline, until an animation pose ultimately reaches the output.</p>
<p>The system is intelligent enough to optimize away operations that don't affect the output.</p>
<p>You typically control which animations are played when through a <a href="../../../Miscellaneous/blackboards.html">blackboard</a>. For quick prototyping you can also use the <a href="anim-nodes-input.html">input nodes</a> to get certain input data directly into the graph.</p>
<p>Simple animation state machines can be built directly in the animation controller graph using the <a href="anim-nodes-logic-math.html">logic and math nodes</a> as well as the <a href="anim-nodes-blackboard.html">blackboard nodes</a>. For more complex logic you should use <a href="../../../custom-code/custom-code-overview.html">custom code</a>.</p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="../skeletal-animation-overview.html">Skeletal Animations</a></li>
<li><a href="animation-graph-asset.html">Animation Graph Asset</a></li>
<li><a href="animation-controller-component.html">Animation Controller Component</a></li>
<li><a href="../animated-mesh-component.html">Animated Mesh Component</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/ezEngine/docs-src/blob/main/pages/docs/animation/skeletal-animation/animation-controller/animation-graph-overview.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      	  <span class="footer-logo">
      	    <a id="logo_ez" href="https://ezEngine.net"></a>
            </span>
      	  <span class="footer-logo">
              <a id="logo_github" href="https://github.com/ezEngine/ezEngine" target="_blank"></a>
            </span>
      	  <span class="footer-logo">
      	    <a id="logo_twitter" href="https://twitter.com/ezengineproject" target="_blank"></a>
            </span>
      	  <span class="footer-logo">
      	    <a id="logo_discord" href="https://discord.gg/rfJewc5khZ" target="_blank"></a>
            </span>
      	  <span class="footer-logo">
      	    <a id="logo_youtube" href="https://www.youtube.com/@ezEngine" target="_blank"></a>
            </span>
            <!--
      	  
            <span>Generated by <strong>DocFX</strong></span>
      	  -->
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../../styles/main.js"></script>
    

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '', 'auto');
    ga('send', 'pageview');
    </script>
  </body>
</html>
