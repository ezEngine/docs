{
  "conceptual": "\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"3\">The lifetime of <a href=\"~/pages/docs/runtime/world/game-objects.md\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"3\">game objects</a> and <a href=\"~/pages/docs/runtime/world/components.md\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"3\">components</a> is tightly controlled by the <a href=\"~/pages/docs/runtime/world/worlds.md\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"3\">world</a> that they belong to. Neither are objects reference counted, nor garbage collected. You have full control over the destruction of objects, but by default 'deleted' objects are not destroyed before the end of the frame, to make writing robust code easy.</p>\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"5\">The lifetime of objects is directly linked to the object hierarchy. If a game object gets deleted, that also deletes all child nodes and all attached components.</p>\n<h2 id=\"referencing-objects\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"7\">Referencing Objects</h2>\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"9\">In C++ you can of course always hold pointers to anything. Within a single frame, it is fine to reference game objects and components by pointers. However, once the next frame starts, you have to assume that those pointers are invalid. Not only can objects be deleted, but even live objects can be moved around in memory. This 'compacting' is an optimization and can happen to any object between frames.</p>\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"11\">Therefore, instead of keeping pointers to objects, you should always use <em sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"11\">handles</em>. Specifically <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"11\">ezGameObjectHandle</code> for <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"11\">ezGameObject</code> references, and <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"11\">ezComponentHandle</code> for <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"11\">ezComponent</code> (and derived) types.</p>\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"13\">Handles act like <a href=\"https://en.wikipedia.org/wiki/Weak_reference\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"13\">weak pointers</a>. Once you have a handle to an object, you can keep it around forever. When you need to access the actual object, you call <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"13\">ezWorld::TryGetObject()</code> or <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"13\">ezWorld::TryGetComponent()</code>. If the object is still alive at that time, you get back a pointer. That pointer is guaranteed to stay valid until the end of the frame, so you don't need to call the <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"13\">TryGet...</code> function again.</p>\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"15\">As a rule of thumb, you should <em sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"15\">never</em> have <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"15\">ezGameObject*</code> or <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"15\">ezComponent*</code> types as class members. Pointers to these types should be limited to local function variables.</p>\n<h2 id=\"deleting-game-objects\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"17\">Deleting Game Objects</h2>\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"19\">To delete a game object, call <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"19\">ezWorld::DeleteObjectDelayed()</code>. This will put the object into a deletion queue, and will remove the object at the end of the frame. This guarantees that all code that tries to access the object within this frame will work correctly.</p>\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"21\">You can also call <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"21\">ezWorld::DeleteObjectNow()</code>. This will indeed delete the object right at that instant. The only situation where it is ok to call this, is in tools where you modify a world in a single threaded way and you know that no other code can ever access objects. Here, having an object not destroyed immediately may be undesirable.</p>\n<h2 id=\"deleting-components\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"23\">Deleting Components</h2>\n<p sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"25\">To delete a component, get its <a href=\"~/pages/docs/runtime/world/component-managers.md\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"25\">component manager</a> and call <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"25\">DeleteComponent()</code> on it. The component won't be deallocated right away, that is deferred till the end of the frame. However, it will be <em sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"25\">deactivated</em> and <em sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"25\">deinitialized</em> immediately. Therefore, if other code tries to access such a component, it will get valid memory, but it may see a deinitialized component. Such a situation can be detected by calling <code sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"25\">ezComponent::IsActiveAndInitialized()</code> on the target. If you delete individual components during a frame (and not entire objects), code that accesses those components should be prepared to deal with deinitialized components.</p>\n<h2 id=\"see-also\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"27\">See Also</h2>\n<ul sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"30\">\n<li sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"30\"><a href=\"~/pages/docs/runtime/world/game-objects.md\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"30\">Game Objects</a></li>\n<li sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"31\"><a href=\"~/pages/docs/runtime/world/components.md\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"31\">Components</a></li>\n</ul>\n",
  "type": "Conceptual",
  "source": {
    "remote": {
      "path": "pages/docs/runtime/world/object-lifetime.md",
      "branch": "main",
      "repo": "https://github.com/ezEngine/docs-src"
    },
    "startLine": 0,
    "endLine": 0
  },
  "path": "pages/docs/runtime/world/object-lifetime.md",
  "documentation": {
    "remote": {
      "path": "pages/docs/runtime/world/object-lifetime.md",
      "branch": "main",
      "repo": "https://github.com/ezEngine/docs-src"
    },
    "startLine": 0,
    "endLine": 0
  },
  "_appFaviconPath": "assets/images/favicon.svg",
  "_appFooter": "Hello",
  "_appLogoPath": "assets/images/EZ-text.svg",
  "_appName": "ezEngine",
  "_appTitle": "ezEngine",
  "_enableGoogleAnalytics": true,
  "_enableNewTab": true,
  "_enableSearch": true,
  "_gitContribute": {
    "repo": "https://github.com/ezEngine/docs-src",
    "branch": "main"
  },
  "_systemKeys": [
    "conceptual",
    "type",
    "source",
    "path",
    "documentation",
    "title",
    "rawTitle",
    "wordCount"
  ],
  "rawTitle": "<h1 id=\"object-lifetime\" sourcefile=\"pages/docs/runtime/world/object-lifetime.md\" sourcestartlinenumber=\"1\">Object Lifetime</h1>",
  "title": "Object Lifetime",
  "wordCount": 482,
  "_key": "pages/docs/runtime/world/object-lifetime.md",
  "_navKey": "~/toc.yml",
  "_navPath": "toc.html",
  "_navRel": "../../../../toc.html",
  "_path": "pages/docs/runtime/world/object-lifetime.html",
  "_rel": "../../../../",
  "_tocKey": "~/pages/docs/toc.md",
  "_tocPath": "pages/docs/toc.html",
  "_tocRel": "../../toc.html",
  "__global": {
    "namespacesInSubtitle": "Namespaces",
    "classesInSubtitle": "Classes",
    "structsInSubtitle": "Structs",
    "interfacesInSubtitle": "Interfaces",
    "enumsInSubtitle": "Enums",
    "delegatesInSubtitle": "Delegates",
    "constructorsInSubtitle": "Constructors",
    "fieldsInSubtitle": "Fields",
    "propertiesInSubtitle": "Properties",
    "methodsInSubtitle": "Methods",
    "eventsInSubtitle": "Events",
    "operatorsInSubtitle": "Operators",
    "eiisInSubtitle": "Explicit Interface Implementations",
    "functionsInSubtitle": "Functions",
    "variablesInSubtitle": "Variables",
    "typeAliasesInSubtitle": "Type Aliases",
    "membersInSubtitle": "Members",
    "improveThisDoc": "Edit this page",
    "viewSource": "View Source",
    "inheritance": "Inheritance",
    "derived": "Derived",
    "inheritedMembers": "Inherited Members",
    "package": "Package",
    "namespace": "Namespace",
    "assembly": "Assembly",
    "syntax": "Syntax",
    "overrides": "Overrides",
    "implements": "Implements",
    "remarks": "Remarks",
    "examples": "Examples",
    "seealso": "See Also",
    "declaration": "Declaration",
    "parameters": "Parameters",
    "typeParameters": "Type Parameters",
    "type": "Type",
    "name": "Name",
    "description": "Description",
    "returns": "Returns",
    "fieldValue": "Field Value",
    "propertyValue": "Property Value",
    "eventType": "Event Type",
    "variableValue": "Variable Value",
    "typeAliasType": "Type Alias Type",
    "exceptions": "Exceptions",
    "condition": "Condition",
    "extensionMethods": "Extension Methods",
    "note": "Note",
    "warning": "Warning",
    "tip": "Tip",
    "important": "Important",
    "caution": "Caution",
    "tocToggleButton": "Show / Hide Table of Contents",
    "tocFilter": "Filter by title",
    "search": "Search",
    "searchResults": "Search Results for",
    "searchResultsCount": "{count} results for \"{query}\"",
    "searchNoResults": "No results for \"{query}\"",
    "pageFirst": "First",
    "pagePrev": "Previous",
    "pageNext": "Next",
    "pageLast": "Last",
    "inThisArticle": "In this article",
    "nextArticle": "Next",
    "prevArticle": "Previous",
    "backToTop": "Back to top",
    "themeLight": "Light",
    "themeDark": "Dark",
    "themeAuto": "Auto",
    "changeTheme": "Change theme",
    "copy": "Copy",
    "downloadPdf": "Download PDF",
    "_shared": {}
  },
  "_disableToc": false,
  "docurl": "https://github.com/ezEngine/docs-src/blob/main/pages/docs/runtime/world/object-lifetime.md/#L1"
}