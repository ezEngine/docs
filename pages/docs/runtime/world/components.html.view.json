{
  "conceptual": "\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"3\">For an introduction what a component is and how it fits into the overall picture, see <a href=\"~/pages/docs/runtime/world/world-overview.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"3\">The World / Scenegraph System</a>.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"5\">This documentation focuses on the C++ <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"5\">ezComponent</code> class. The functionality exposed through other mechanisms, such as <a href=\"~/pages/docs/custom-code/typescript/typescript-overview.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"5\">TypeScript</a>, may be more limited in scope, but ultimately maps to the C++ implementation.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"7\">Components are the fundamental building blocks with which to make the engine do things. Components act as glue between systems like the renderer and the user. They expose the available functionality to the editor and they control when and how each system is used. This document describes how components work.</p>\n<h2 id=\"owner\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"9\">Owner</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"11\">A component is always attached to a <a href=\"~/pages/docs/runtime/world/game-objects.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"11\">game object</a>. This 'owner' can be queried with <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"11\">ezComponent::GetOwner()</code>.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"13\">There is a brief moment where a component is not attached to an owner, which is when it is being prepared for destruction. If you run into such a situation use <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"13\">ezComponent::IsActiveAndInitialized()</code> to filter them out.</p>\n<h2 id=\"component-manager\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"15\">Component Manager</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"17\">Every component has a <a href=\"~/pages/docs/runtime/world/component-managers.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"17\">component manager</a>. You can access it with <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"17\">ezComponent::GetOwningManager()</code>.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"19\">To get the component manager for a specific component type, you need to query the <a href=\"~/pages/docs/runtime/world/worlds.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"19\">world</a>. See <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"19\">ezWorld::GetOrCreateComponentManager()</code> and <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"19\">ezWorld::GetOrCreateManagerForComponentType()</code>.</p>\n<h2 id=\"creating-components\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"21\">Creating Components</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"23\">The most convenient way to create a component of a specific type is to call the static function <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"23\">CreateComponent()</code> on the <a href=\"~/pages/docs/runtime/world/component-managers.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"23\">component manager</a> for that type.</p>\n<!-- BEGIN-DOCS-CODE-SNIPPET: create-component -->\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"26\">ezMeshComponent* pMesh;\npWorld-&gt;GetOrCreateComponentManager&lt;ezMeshComponentManager&gt;()-&gt;CreateComponent(pObject, pMesh);\n</code></pre>\n<!-- END-DOCS-CODE-SNIPPET -->\n<h2 id=\"deleting-components\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"32\">Deleting Components</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"34\">To delete a component, just call <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"34\">ezComponent::DeleteComponent()</code> on it. Note that deleting individual components is relatively rare, it is more common to just delete the entire object. Also be aware that deleted components are immediately deinitialized. They will still exist in a semi-usable state until the end of the frame, but if other code tries to access the component within the same frame, it may see it in an 'unexpected' state. If necessary, that code can check <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"34\">ezComponent::IsActiveAndInitialized()</code> to prevent working with just deleted components.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"36\">You can also delete a component only through its handle, if you have the corresponding <a href=\"~/pages/docs/runtime/world/component-managers.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"36\">component manager</a>.</p>\n<h2 id=\"component-handles\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"38\">Component Handles</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"40\">When you need to reference components across frames, you should always store <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"40\">handles</em> to them, never pointers. See the chapter about <a href=\"~/pages/docs/runtime/world/object-lifetime.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"40\">object lifetime</a> for details.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"42\">To convert a handle to a (temporary) pointer, use <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"42\">ezWorld::TryGetComponent()</code>.</p>\n<h2 id=\"querying-components-from-game-objects\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"44\">Querying Components from Game Objects</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"46\">When you have a <a href=\"~/pages/docs/runtime/world/game-objects.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"46\">game object</a> you can get a list of all attached components with <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"46\">ezGameObject::GetComponents()</code>. However, typically you want to get a component of a specific type. Use <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"46\">ezGameObject::TryGetComponentOfBaseType()</code> for that:</p>\n<!-- BEGIN-DOCS-CODE-SNIPPET: find-component -->\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"49\">ezMeshComponent* pMesh = nullptr;\nif (pObject-&gt;TryGetComponentOfBaseType(pMesh))\n{\n  pMesh-&gt;DeleteComponent();\n}\n</code></pre>\n<!-- END-DOCS-CODE-SNIPPET -->\n<h2 id=\"iterating-over-all-components\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"58\">Iterating over all Components</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"60\">You can iterate over all components of one type by calling <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"60\">ezComponentManager::GetComponents()</code>. This returns an iterator with which you can efficiently access all components managed by that component manager. Be aware that some components may not be active, so you should skip those.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"62\">You can also access all components on a game object using <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"62\">ezGameObject::GetComponents()</code>.</p>\n<h2 id=\"component-reflection-block\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"64\">Component Reflection Block</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"66\">All component types must use <a href=\"~/pages/docs/runtime/reflection-system.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"66\">reflection</a>. Only reflected members show up as properties in the editor. An example block looks like this:</p>\n<!-- BEGIN-DOCS-CODE-SNIPPET: component-reflection-block -->\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"69\">EZ_BEGIN_COMPONENT_TYPE(DebugRenderComponent, 2, ezComponentMode::Static)\n{\n  EZ_BEGIN_PROPERTIES\n  {\n    EZ_MEMBER_PROPERTY(&quot;Size&quot;, m_fSize)-&gt;AddAttributes(new ezDefaultValueAttribute(1), new ezClampValueAttribute(0, 10)),\n    EZ_MEMBER_PROPERTY(&quot;Color&quot;, m_Color)-&gt;AddAttributes(new ezDefaultValueAttribute(ezColor::White)),\n    EZ_ACCESSOR_PROPERTY(&quot;Texture&quot;, GetTextureFile, SetTextureFile)-&gt;AddAttributes(new ezAssetBrowserAttribute(&quot;Texture 2D&quot;)),\n    EZ_BITFLAGS_MEMBER_PROPERTY(&quot;Render&quot;, DebugRenderComponentMask, m_RenderTypes)-&gt;AddAttributes(new ezDefaultValueAttribute(DebugRenderComponentMask::Box)),\n  }\n  EZ_END_PROPERTIES;\n\n  EZ_BEGIN_ATTRIBUTES\n  {\n    new ezCategoryAttribute(&quot;SampleGamePlugin&quot;), // Component menu group\n  }\n  EZ_END_ATTRIBUTES;\n\n  EZ_BEGIN_MESSAGEHANDLERS\n  {\n    EZ_MESSAGE_HANDLER(ezMsgSetColor, OnSetColor)\n  }\n  EZ_END_MESSAGEHANDLERS;\n\n  EZ_BEGIN_FUNCTIONS\n  {\n    EZ_SCRIPT_FUNCTION_PROPERTY(SetRandomColor)\n  }\n  EZ_END_FUNCTIONS;\n}\nEZ_END_COMPONENT_TYPE\n</code></pre>\n<!-- END-DOCS-CODE-SNIPPET -->\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"103\">The <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"103\">properties</em> section lists all the members that should be editable. Components can have 'virtual' properties, that don't exist as members, but use <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"103\">accessors</em> (functions). Properties can have <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"103\">attributes</em> to configure how they show up in the editor.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"105\">The <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"105\">attributes</em> section can additionally specify type specific properties. For example, here we tell the editor where in the component menu this component should appear.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"107\">The <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"107\">message handler</em> section is important to enable <a href=\"~/pages/docs/runtime/world/world-messaging.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"107\">messaging</a>.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"109\">The <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"109\">functions</em> section is used to expose certain member functions to the reflection system, such that script bindings, such as <a href=\"~/pages/docs/custom-code/typescript/typescript-overview.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"109\">TypeScript</a> can call these functions.</p>\n<!-- TODO: at some point 'we' must document all the available options *sigh* -->\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"113\">At the moment there is no documentation that lists all the available options. It is best to get inspiration by looking at the code for existing components.</p>\n<h2 id=\"component-activation\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"115\">Component Activation</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"117\">There are three important states for components:</p>\n<ol sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"119\">\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"119\">Whether they are <strong sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"119\">initialized</strong></li>\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"120\">Whether they are <strong sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"120\">active</strong></li>\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"121\">Whether they are <strong sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"121\">simulating</strong></li>\n</ol>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"123\">You can hook into changes to these states by overriding <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"123\">ezComponent::Initialize()</code> / <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"123\">ezComponent::Deinitialize()</code>, <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"123\">ezComponent::OnActivated()</code> / <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"123\">ezComponent::OnDeactivated()</code> and <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"123\">ezComponent::OnSimulationStarted()</code>.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"125\">The most important function to override is <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"125\">ezComponent::OnSimulationStarted()</code>. This is almost always the function where you want to set up your component. It is called when the component is fully initialized, active and the world is actively simulating (the game is running). In the editor, it is only called after you start <a href=\"~/pages/docs/editor/run-scene.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"125\">running a scene</a>, not while you are editing. Since most game code should not do anything while the scene is being edited, you typically don't need to set up anything before this time.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"127\">Components can be 'active' or 'inactive'. This can be used to switch them on and off at will. The <a href=\"~/pages/docs/runtime/world/game-objects.md#active-flag\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"127\">active flag on game objects</a> affects this, but components can also be deactivated individually with <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"127\">ezComponent::SetActiveFlag()</code>. When a component is not active, its component manager will typically not update it anymore. If you want to properly support switching components on and off at any time, you often need to be careful to restore state properly. <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"127\">ezComponent::OnActivated()</code> and <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"127\">ezComponent::OnDeactivated()</code> will be called every time a component's active state changes. Additionally, if the world is being simulated, <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"127\">ezComponent::OnSimulationStarted()</code> will also be called after each call to <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"127\">ezComponent::OnActivated()</code>.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"129\">It should be extremely rare that you need to override <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"129\">ezComponent::Initialize()</code> or <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"129\">ezComponent::Deinitialize()</code>.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"131\">For all the details on the activation functions, refer to the <a href=\"~/pages/docs/api-docs.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"131\">API Docs</a>.</p>\n<blockquote sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"133\">\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"133\"><strong sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"133\">Caution:</strong></p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"135\">A common mistake is to override a function like <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"135\">ezComponent::OnActivated()</code> but to not call its base class implementation (<code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"135\">SUPER::OnActivated()</code>). It is good practice to always do so.</p>\n</blockquote>\n<h3 id=\"forced-activation\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"137\">Forced Activation</h3>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"139\">If for some reason a component must access another component during its own setup, and requires that other component to be set up first, you can enforce this by calling <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"139\">ezComponent::EnsureSimulationStarted()</code> on the other component.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"141\">An example is a physics joint component. To set up a joint, the component needs to access two rigid body components. Both must be already set up themselves, otherwise the joint component cannot link the two. Therefore, when the joint component is being set up, it  calls <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"141\">ezComponent::EnsureSimulationStarted()</code> on both rigid body components, to make sure it can access valid data.</p>\n<h2 id=\"user-flags\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"143\">User Flags</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"145\"><code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"145\">ezComponent::SetUserFlag</code> and <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"145\">ezComponent::GetUserFlag</code> can be used to store up to 8 bits of user flags. This should only be used internally, to reduce memory consumption.</p>\n<h2 id=\"dynamic-and-static-components\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"147\">Dynamic and Static Components</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"149\">In the component reflection block you have to specify whether a component is 'dynamic' or 'static':</p>\n<!-- BEGIN-DOCS-CODE-SNIPPET: component-reflection -->\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"152\">EZ_BEGIN_COMPONENT_TYPE(DemoComponent, 3 /* version */, ezComponentMode::Dynamic)\n</code></pre>\n<!-- END-DOCS-CODE-SNIPPET -->\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"157\">This information tells the editor whether this component type attempts to modify the owner's transformation (position, rotation, scale). If any <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"157\">dynamic</em> component is attached to a <a href=\"~/pages/docs/runtime/world/game-objects.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"157\">game object</a>, the entire object will be marked as dynamic and will have its transform updated every frame. If only <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"157\">static</em> components are attached, the game object can be marked as static as well, and costs less performance.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"159\">See <a href=\"~/pages/docs/runtime/world/game-objects.md#static-vs-dynamic-objects\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"159\">Static vs. Dynamic Objects</a>.</p>\n<h2 id=\"serialization-and-versioning\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"161\">Serialization and Versioning</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"163\">When editing a scene or prefab, the editor will serialize components purely based on reflection information. That means only the properties that are marked up through reflection and are therefore visible to the user are serialized. This format is robust to change (and allows for patches), but is not efficient.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"165\">For the runtime format, that a shipping game should use, scenes are <em sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"165\">exported</em>. This is a binary serialization format and every component has full control over what data it writes and how it encodes the data. When you <a href=\"~/pages/docs/editor/run-scene.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"165\">run a scene</a> in <a href=\"~/pages/docs/tools/player.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"165\">ezPlayer</a> the editor will serialize the scene to the binary format, and the player will deserialize it. If a component doesn't properly serialize all its data, the results can range from misconfigured components to crashes during loading.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"167\">To implement proper serialization, you need to override <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"167\">ezComponent::SerializeComponent()</code> and <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"167\">ezComponent::DeserializeComponent()</code>.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"169\">During serialization you simply write data to a stream, as you like:</p>\n<!-- BEGIN-DOCS-CODE-SNIPPET: component-serialize -->\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"172\">void DemoComponent::SerializeComponent(ezWorldWriter&amp; stream) const\n{\n  SUPER::SerializeComponent(stream);\n\n  auto&amp; s = stream.GetStream();\n\n  s &lt;&lt; m_fAmplitude;\n  s &lt;&lt; m_Speed;\n}\n</code></pre>\n<!-- END-DOCS-CODE-SNIPPET -->\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"185\">Don't forget to call <code sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"185\">SUPER::SerializeComponent()</code> to include the data of the base class.</p>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"187\">When you deserialize a component, you need to handle <strong sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"187\">versioning</strong>. Every component type has a version number, which is specified in the component reflection block:</p>\n<!-- BEGIN-DOCS-CODE-SNIPPET: component-reflection -->\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"190\">EZ_BEGIN_COMPONENT_TYPE(DemoComponent, 3 /* version */, ezComponentMode::Dynamic)\n</code></pre>\n<!-- END-DOCS-CODE-SNIPPET -->\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"195\">The version number should be increased every time the serialization format of the component type has to change. During deserialization you can query the version number with which this component data was written. You than have to handle converting older formats as appropriate:</p>\n<!-- BEGIN-DOCS-CODE-SNIPPET: component-deserialize -->\n<pre><code class=\"lang-cpp\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"198\">void DemoComponent::DeserializeComponent(ezWorldReader&amp; stream)\n{\n  SUPER::DeserializeComponent(stream);\n  const ezUInt32 uiVersion = stream.GetComponentTypeVersion(GetStaticRTTI());\n\n  auto&amp; s = stream.GetStream();\n\n  s &gt;&gt; m_fAmplitude;\n\n  if (uiVersion &lt;= 2)\n  {\n    // up to version 2 the angle was stored as a float in degree\n    // convert this to ezAngle\n    float fDegree;\n    s &gt;&gt; fDegree;\n    m_Speed = ezAngle::Degree(fDegree);\n  }\n  else\n  {\n    s &gt;&gt; m_Speed;\n  }\n}\n</code></pre>\n<!-- END-DOCS-CODE-SNIPPET -->\n<h2 id=\"custom-components\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"224\">Custom Components</h2>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"226\">You can extend the engine with custom components:</p>\n<ul sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"228\">\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"228\"><a href=\"~/pages/docs/custom-code/cpp/custom-cpp-component.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"228\">Custom Components with C++</a></li>\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"229\"><a href=\"~/pages/docs/custom-code/typescript/custom-ts-components.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"229\">Custom Components with TypeScript</a></li>\n</ul>\n<p sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"231\">For examples, have a look at the <a href=\"~/pages/samples/sample-game-plugin.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"231\">Sample Game Plugin</a>.</p>\n<h2 id=\"see-also\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"233\">See Also</h2>\n<ul sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"236\">\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"236\"><a href=\"~/pages/docs/custom-code/custom-code-overview.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"236\">Custom Code</a></li>\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"237\"><a href=\"~/pages/docs/runtime/world/world-overview.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"237\">The World / Scenegraph System</a></li>\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"238\"><a href=\"~/pages/docs/runtime/world/game-objects.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"238\">Game Objects</a></li>\n<li sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"239\"><a href=\"~/pages/samples/sample-game-plugin.md\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"239\">Sample Game Plugin</a></li>\n</ul>\n",
  "type": "Conceptual",
  "source": {
    "remote": {
      "path": "pages/docs/runtime/world/components.md",
      "branch": "docfx_update",
      "repo": "https://github.com/ezEngine/docs-src"
    },
    "startLine": 0.0,
    "endLine": 0.0
  },
  "path": "pages/docs/runtime/world/components.md",
  "documentation": {
    "remote": {
      "path": "pages/docs/runtime/world/components.md",
      "branch": "docfx_update",
      "repo": "https://github.com/ezEngine/docs-src"
    },
    "startLine": 0.0,
    "endLine": 0.0
  },
  "_appFaviconPath": "assets/images/favicon.svg",
  "_appFooter": "Hello",
  "_appLogoPath": "assets/images/EZ-text.svg",
  "_appName": "ezEngine",
  "_appTitle": "ezEngine",
  "_enableGoogleAnalytics": true,
  "_enableNewTab": true,
  "_enableSearch": true,
  "_gitContribute": {
    "repo": "https://github.com/ezEngine/docs-src",
    "branch": "main"
  },
  "_systemKeys": [
    "conceptual",
    "type",
    "source",
    "path",
    "documentation",
    "title",
    "rawTitle",
    "wordCount"
  ],
  "rawTitle": "<h1 id=\"components\" sourcefile=\"pages/docs/runtime/world/components.md\" sourcestartlinenumber=\"1\">Components</h1>",
  "title": "Components",
  "wordCount": 1525.0,
  "_key": "pages/docs/runtime/world/components.md",
  "_navKey": "~/toc.yml",
  "_navPath": "toc.html",
  "_navRel": "../../../../toc.html",
  "_path": "pages/docs/runtime/world/components.html",
  "_rel": "../../../../",
  "_tocKey": "~/pages/docs/toc.md",
  "_tocPath": "pages/docs/toc.html",
  "_tocRel": "../../toc.html",
  "__global": {
    "namespacesInSubtitle": "Namespaces",
    "classesInSubtitle": "Classes",
    "structsInSubtitle": "Structs",
    "interfacesInSubtitle": "Interfaces",
    "enumsInSubtitle": "Enums",
    "delegatesInSubtitle": "Delegates",
    "constructorsInSubtitle": "Constructors",
    "fieldsInSubtitle": "Fields",
    "propertiesInSubtitle": "Properties",
    "methodsInSubtitle": "Methods",
    "eventsInSubtitle": "Events",
    "operatorsInSubtitle": "Operators",
    "eiisInSubtitle": "Explicit Interface Implementations",
    "functionsInSubtitle": "Functions",
    "variablesInSubtitle": "Variables",
    "typeAliasesInSubtitle": "Type Aliases",
    "membersInSubtitle": "Members",
    "improveThisDoc": "Edit this page",
    "viewSource": "View Source",
    "inheritance": "Inheritance",
    "derived": "Derived",
    "inheritedMembers": "Inherited Members",
    "package": "Package",
    "namespace": "Namespace",
    "assembly": "Assembly",
    "syntax": "Syntax",
    "overrides": "Overrides",
    "implements": "Implements",
    "remarks": "Remarks",
    "examples": "Examples",
    "seealso": "See Also",
    "declaration": "Declaration",
    "parameters": "Parameters",
    "typeParameters": "Type Parameters",
    "type": "Type",
    "name": "Name",
    "description": "Description",
    "returns": "Returns",
    "fieldValue": "Field Value",
    "propertyValue": "Property Value",
    "eventType": "Event Type",
    "variableValue": "Variable Value",
    "typeAliasType": "Type Alias Type",
    "exceptions": "Exceptions",
    "condition": "Condition",
    "extensionMethods": "Extension Methods",
    "note": "Note",
    "warning": "Warning",
    "tip": "Tip",
    "important": "Important",
    "caution": "Caution",
    "tocToggleButton": "Show / Hide Table of Contents",
    "tocFilter": "Filter by title",
    "search": "Search",
    "searchResults": "Search Results for",
    "searchResultsCount": "{count} results for \"{query}\"",
    "searchNoResults": "No results for \"{query}\"",
    "pageFirst": "First",
    "pagePrev": "Previous",
    "pageNext": "Next",
    "pageLast": "Last",
    "inThisArticle": "In this article",
    "nextArticle": "Next",
    "prevArticle": "Previous",
    "backToTop": "Back to top",
    "themeLight": "Light",
    "themeDark": "Dark",
    "themeAuto": "Auto",
    "changeTheme": "Change theme",
    "copy": "Copy",
    "downloadPdf": "Download PDF",
    "_shared": {}
  },
  "_disableToc": false,
  "docurl": "https://github.com/ezEngine/docs-src/blob/main/pages/docs/runtime/world/components.md/#L1"
}